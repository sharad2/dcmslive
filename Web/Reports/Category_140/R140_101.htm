<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>140.101 Pickslips in Bucket</title>
    <style type="text/css">
        .style1
        {
            text-align: left;
        }
        .style2
        {
            width: 40%;
        }
        .style3
        {
            text-align: left;
            width: 40%;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center">
        140.101 Pickslips in Bucket</h1>
    <h3>
        Author : Hemant K. Varshney</h3>
    <ul style="list-style: none">
        <li>Mentor: Deepak Bhatt</li>
        <li>$Revision: 1807 $</li>
        <li>Status: Done</li>
        <li>Tested By: Pravin Awasthi</li>
    </ul>
    <p>
        This report shows pickslips for passed bucket along with picking status and 
        customer id.</p>
    <h2>
        Overview</h2>
    <p>
        This report shows pickslips detail for passed bucket along with the Picking Status. The Picking status is ascertained, based on the following conditions: <br />
<br />
If the passed bucket is unavailable and picking status of the pickslip is null then the picking status would be 'Not Available'. <br />
If the passed bucket is available and picking status of the pickslip is null then the picking status would be 'Available'. <br />
If the passed bucket is available and picking status of the pickslip is 'TRANSFERRED' then the picking status would be 'Completed'. 
</p>
    <h2>
        Algorithm</h2>
    <p>
        Get the Pickslip id, Picking status and Customer id for each bucket from tables PS and BOX.</p>
    <h2>
        Output</h2>
    <table width="100%" cellspacing="1" cellpadding="1" border="1">
        <tr>
            <td style="width:25%; text-align:center">
                <b>Item</b>
            </td>
            <td style="width:20%; text-align:center">
                <b>Summary</b>
            </td>
            <td style="width:10%; text-align:center">
                <b>Sort Sequence</b>
            </td>
            <td style="width:45%; text-align:center">
                <b>Detail</b>
            </td>
        </tr>
        <tr>
            <td style="width:25%; " class="style1">
                Picking Status</td>
            <td style="width:20%; text-align:center">
                No</td>
            <td style="width:10%; text-align:center">
                1</td>
            <td style="width:45%; " class="style1">
                Picking status of the pickslip based on conditions define in overview of the 
                report.</td>
        </tr>
        <tr>
            <td style="width:25%; " class="style1">
                Pickslip</td>
            <td style="width:20%; text-align:center">
                No</td>
            <td style="width:10%; text-align:center">
                2</td>
            <td style="width:45%; " class="style1">
                Pickslip ids for the passed bucket</td>
        </tr>
        <tr>
            <td style="width:25%; " class="style1">
                Customer Id</td>
            <td style="width:20%; text-align:center">
                No</td>
            <td style="width:10%; text-align:center">
                &nbsp;</td>
            <td style="width:45%; " class="style1">
                The customer id of the pickslips of passed bucket.</td>
        </tr>
    </table>
    <h2>
        Parameters</h2>
    <table width="100%" cellspacing="1" cellpadding="1" border="1">
        <tr>
            <td style="width:20% ; text-align:center">
                <b>Name</b>
            </td>
            <td style="width:15% ; text-align:center">
                <b>Type</b>
            </td>
            <td style="text-align:center" class="style2">
                <b>Default</b>
            </td>
            <td style="width:45%; text-align:center">
                <b>Detail</b>
            </td>
        </tr>
        <tr>
            <td style="width:20%; " class="style1">
                                Bucket</td>
            <td style="width:15%; " class="style1">
                Integer</td>
            <td class="style3">
                None</td>
            <td style="width:45%; " class="style1">
                The bucket Id for which details needs to be shown</td>
        </tr>
        <tr>
            <td style="width:20%; " class="style1">
                Virtual Warehouse</td>
            <td style="width:15%; " class="style1">
                String</td>
            <td class="style3">
                All</td>
            <td style="width:45%; " class="style1">
                The particular virtual warehouse for which you wish to see pickslips.</td>
        </tr>
        <tr>
            <td style="width:20%; " class="style1">
                Label</td>
            <td style="width:15%; " class="style1">
                String</td>
            <td class="style3">
                All</td>
            <td style="width:45%; " class="style1">
                The Label id of pickslips</td>
        </tr>
        <tr>
            <td style="width:20%; " class="style1">
                Customer Id</td>
            <td style="width:15%; " class="style1">
                String</td>
            <td class="style3">
                None</td>
            <td style="width:45%; " class="style1">
                The customer whose bucket you are interested in</td>
        </tr>
        <tr>
            <td style="width:20%; " class="style1">
                Warehouse location</td>
            <td style="width:15%; " class="style1">
                String </td>
            <td class="style3">
                all</td>
            <td style="width:45%; " class="style1">
                Warehouse location id for whihc you would like to see the data</td>
        </tr>
    </table>
    <h2>
        Performance Detail</h2>
    <p xmlns="http://www.w3.org/1999/xhtml">
        <i>Expected Time for the report output is </i>1 second</p>
    The query will exhibit logarithmic performance with respect to the number of 
    pickslips in bucket. There is an index based scan on tables PS ,PO and BUCKET.
    <h2>
        Behavior Change</h2>
    <ul>
        <li>No behavior change</li>
        <li></li>
    </ul>
    <h2>
        Issues</h2>
    <ul>
        <li>No known issue</li>
    </ul>
    <h2>
        Prerequisites</h2>
        <ul>
                <li>
                <h4>
                Private synonyms requried for the tables: </h4>
            <pre>
<code>ps,
PO,
bucket</code></pre>
                <ul>
                <li>
            <h4>
                Script to create the synonyms:</h4>
                <pre>
 <code>create or replace synonym ps for dcms8.ps;       
create or replace synonym bucket for dcms8.bucket;
create or replace synonym po for dcms8.po; </code></pre>
        </li>
                </ul>
                </li>
         <li>
         <h4>App-Settings required:</h4>
           <pre><code>No AppSetting is required</code></pre></li>
   </ul>
    <h2>
        Query&#39;s documentation:</h2>
    <pre>
        SELECT ps.pickslip_id AS pickslip_id,
           MIN(ps.customer_id) AS customer_id,
           MAX(CASE
             WHEN ps.picking_status IS NULL AND
                  bkt.available_for_pitching IS NULL THEN
              'Not Available'
             ELSE
              (CASE
             WHEN ps.picking_status IS NULL AND
                  bkt.available_for_pitching = 'Y' THEN
              'Available'
             ELSE
              (CASE
             WHEN ps.picking_status = 'TRANSFERED' AND
                  bkt.available_for_pitching = 'Y' THEN
              'COMPLETED'
             ELSE
              ''
           END) END) END) AS picking_status
        FROM ps ps
        LEFT OUTER JOIN po po
            ON ps.customer_id = po.customer_id
           AND ps.po_id = po.po_id
           AND ps.iteration = po.iteration
        LEFT OUTER JOIN bucket bkt ON ps.bucket_id = bkt.bucket_id
        WHERE bkt.bucket_id = cast(:bucket_id as number(5))
         <if>AND ps.vwh_id = CAST(:vwh_id as varchar2(255))</if>
         <if>AND ps.label_id = CAST(:label_id as varchar2(255))</if>
         <if>and ps.warehouse_location_id =:WhLoc</if>
         <if>AND po.start_date &gt;= CAST(:delivery_start_date AS DATE)</if>      
         <if>AND po.start_date &lt;= CAST(:delivery_end_date AS DATE)</if>       
         <if>AND po.dc_cancel_date &gt;=CAST(:dc_cancel_start_date AS DATE)</if>
         <if>AND po.dc_cancel_date &lt;=CAST(:dc_cancel_end_date AS DATE)</if> 
         <if>AND ps.customer_id=CAST(:customer_id as varchar2(255))</if>  
              GROUP BY ps.pickslip_id, ps.vwh_id</pre>
    <h2>
        Validation details</h2>
    <p>
        Description</p>
        <p style="font-weight:bold">Query:</p>
        <pre>
        select ps.pickslip_id,
       max(ps.customer_id),
       ps.bucket_id,
      MAX(ps.picking_status)
       from ps ps
       inner join bucket bkt on 
       ps.bucket_id = bkt.bucket_id
where ps.transfer_date is null
and ps.bucket_id = :bucket_id
group by ps.pickslip_id,
       ps.bucket_id
        </pre>
</body>
</html>
